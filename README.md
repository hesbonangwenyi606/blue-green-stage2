# Blue-Green Deployment with Docker and Nginx

This project demonstrates a **blue-green deployment strategy** for a Node.js application using Docker and Nginx. It allows seamless switching between two versions of an app (`blue` and `green`) with zero downtime.

---

## Table of Contents

- [Project Structure](#project-structure)
- [Features](#features)
- [Prerequisites](#prerequisites)
- [Setup](#setup)
- [Usage](#usage)
- [Switching Between Environments](#switching-between-environments)
- [License](#license)

---

## Project Structure

blue-green-stage2/
├── app/ # Node.js application code
│ └── server.js
├── nginx/ # Nginx configuration
│ ├── nginx.conf.template
│ └── nginx.conf # Generated by start script
├── .env # Environment variables
├── Dockerfile # Node.js app Dockerfile
├── docker-compose.yml # Compose file for blue, green, and nginx
└── start-nginx.sh # Script to start/rebuild containers

yaml
Copy code

---

## Features

- Blue-Green deployment setup with Docker.
- Nginx reverse proxy for traffic routing.
- Zero-downtime switching between `blue` and `green` versions.
- Environment variable-based configuration.

---

## Prerequisites

- Docker
- Docker Compose
- Bash shell (Linux/macOS)

---

## Setup

1. **Clone the repository**

```bash
git clone <your-repo-url>
cd blue-green-stage2
Install dependencies

Each app container installs its dependencies during build. No extra step needed.

Environment Variables

Edit .env:

env
BLUE_IMAGE=app_blue:latest
GREEN_IMAGE=app_green:latest
ACTIVE_POOL=app_blue   # or app_green
PORT=8081             # 8081 for blue, 8082 for green
Usage
Make the start script executable:

bash
chmod +x start-nginx.sh
Run the script to build and start containers:

bash
sudo ./start-nginx.sh
Check running containers:

bash
sudo docker ps
Check Nginx logs:

bash
sudo docker logs nginx
Access the app via:

arduino
http://localhost:8080
Switching Between Environments
To switch traffic from blue to green:

Edit .env:

env
ACTIVE_POOL=app_green
PORT=8082
Re-run the start script:

sudo ./start-nginx.sh
This updates Nginx configuration and directs traffic to the green environment.

License
This project is licensed under the MIT License